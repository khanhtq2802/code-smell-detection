{"text": "<fim_prefix>/*******************************************************************************\n * Copyright (c) 2015 IBH SYSTEMS GmbH.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     IBH SYSTEMS GmbH - initial API and implementation\n *******************************************************************************/\npackage org.eclipse.packagedrone.web.controller.validator;\n\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\nimport org.eclipse.packagedrone.web.controller.binding.ExceptionError;\nimport org.eclipse.packagedrone.web.controller.form.DataValidator;\n\n<fim_suffix>public class FormDataValidator implements Validator\n{\n    @Override\n    public ValidationResult validate ( final Object target )\n    {\n        final SimpleValidationContext ctx = new SimpleValidationContext ();\n\n        for ( final Method m : target.getClass ().getMethods () )\n        {\n            final DataValidator dv = m.getAnnotation ( DataValidator.class );\n            if ( dv == null )\n            {\n                continue;\n            }\n\n            try\n            {\n                m.invoke ( target, ctx );\n            }\n            catch ( IllegalAccessException | IllegalArgumentException | InvocationTargetException e )\n            {\n                ctx.error ( null, new ExceptionError ( e ) );\n            }\n        }\n\n        return ctx.getResult ();\n    }\n}<fim_middle>// class below has no smell\n"}