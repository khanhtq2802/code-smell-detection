{"text": "<fim_prefix>/*******************************************************************************\n * Copyright (c) 2011, 2018 Eurotech and/or its affiliates\n *\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     Eurotech\n *******************************************************************************/\npackage org.eclipse.kura.core.cloud;\n\nimport java.io.IOException;\n\nimport org.eclipse.kura.core.util.GZipUtil;\n\n<fim_suffix>public class CloudPayloadGZipEncoder implements CloudPayloadEncoder {\n\n    private final CloudPayloadEncoder decorated;\n\n    public CloudPayloadGZipEncoder(CloudPayloadEncoder decorated) {\n        this.decorated = decorated;\n    }\n\n    @Override\n    public byte[] getBytes() throws IOException {\n        byte[] source = this.decorated.getBytes();\n        byte[] compressed = GZipUtil.compress(source);\n\n        // Return gzip compressed data only if shorter than uncompressed one\n        return compressed.length < source.length ? compressed : source;\n    }\n}<fim_middle>// class below has no smell\n"}