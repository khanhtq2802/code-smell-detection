{"text": "<fim_prefix>// Copyright (c) Microsoft. All rights reserved.\n// Licensed under the MIT license. See License.txt in the repository root.\n\npackage com.microsoft.tfs.sdk.samples.snippets;\n\nimport com.microsoft.tfs.core.TFSTeamProjectCollection;\nimport com.microsoft.tfs.core.clients.build.IBuildDefinition;\nimport com.microsoft.tfs.core.clients.build.IBuildDetail;\nimport com.microsoft.tfs.core.clients.build.IBuildDetailSpec;\nimport com.microsoft.tfs.core.clients.build.IBuildQueryResult;\nimport com.microsoft.tfs.core.clients.build.IBuildServer;\nimport com.microsoft.tfs.core.clients.build.flags.BuildStatus;\n\n<fim_suffix>public class FindBuilds {\n    public static void main(final String[] args) {\n        final TFSTeamProjectCollection tpc = SnippetSettings.connectToTFS();\n\n        final IBuildServer buildServer = tpc.getBuildServer();\n        final IBuildDefinition def =\n            buildServer.getBuildDefinition(SnippetSettings.PROJECT_NAME, SnippetSettings.BUILD_DEFINITION_NAME);\n        final IBuildDetailSpec spec = buildServer.createBuildDetailSpec(def);\n        spec.setStatus(BuildStatus.ALL);\n\n        System.out.println(\"***\"); //$NON-NLS-1$\n        System.out.println(\"*** Query builds for build definition \" + SnippetSettings.BUILD_DEFINITION_NAME); //$NON-NLS-1$\n        System.out.println(\"***\"); //$NON-NLS-1$\n\n        final IBuildQueryResult buildsQueryResult = buildServer.queryBuilds(spec);\n\n        System.out.println(\"Found \" + buildsQueryResult.getBuilds().length + \" build(s).\"); //$NON-NLS-1$ //$NON-NLS-2$\n\n        for (final IBuildDetail build : buildsQueryResult.getBuilds()) {\n            displayBuildProperties(buildServer, build);\n        }\n\n    }\n\n    private static void displayBuildProperties(final IBuildServer buildServer, final IBuildDetail build) {\n        System.out.println(\"Build \"); //$NON-NLS-1$\n        System.out.println(\"\\tBuild Number: \" + build.getBuildNumber()); //$NON-NLS-1$\n        System.out.println(\"\\tURI: \" + build.getURI()); //$NON-NLS-1$\n        System.out.println(\"\\tStatus: \" + buildServer.getDisplayText(build.getStatus())); //$NON-NLS-1$\n        System.out.println(\"\\tRequested By: \" + build.getRequestedBy()); //$NON-NLS-1$\n        System.out.println(\"\"); //$NON-NLS-1$\n    }\n}<fim_middle>// class below has no smell\n"}