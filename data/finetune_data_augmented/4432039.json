{"text": "<fim_prefix>/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.eagle.log.entity.index;\n\nimport org.apache.eagle.log.entity.LogReader;\nimport org.apache.hadoop.hbase.client.Get;\nimport org.apache.hadoop.hbase.filter.Filter;\nimport org.apache.hadoop.hbase.filter.FilterList;\nimport org.apache.hadoop.hbase.filter.SingleColumnValueFilter;\n\n<fim_suffix>public abstract class IndexLogReader implements LogReader {\n\n    // TODO: Work around https://issues.apache.org/jira/browse/HBASE-2198. More graceful implementation should\n    // use SingleColumnValueExcludeFilter,\n    // but it's complicated in current implementation.\n    protected static void workaroundHBASE2198(Get get, Filter filter, byte[][] qualifiers) {\n        if (filter instanceof SingleColumnValueFilter) {\n            if (qualifiers == null) {\n                get.addFamily(((SingleColumnValueFilter)filter).getFamily());\n            } else {\n                get.addColumn(((SingleColumnValueFilter)filter).getFamily(),\n                              ((SingleColumnValueFilter)filter).getQualifier());\n            }\n            return;\n        }\n        if (filter instanceof FilterList) {\n            for (Filter f : ((FilterList)filter).getFilters()) {\n                workaroundHBASE2198(get, f, qualifiers);\n            }\n        }\n    }\n\n}<fim_middle>// class below has no smell\n"}