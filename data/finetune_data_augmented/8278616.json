{"text": "<fim_prefix>/****************************************************************\n * Licensed to the Apache Software Foundation (ASF) under one   *\n * or more contributor license agreements.  See the NOTICE file *\n * distributed with this work for additional information        *\n * regarding copyright ownership.  The ASF licenses this file   *\n * to you under the Apache License, Version 2.0 (the            *\n * \"License\"); you may not use this file except in compliance   *\n * with the License.  You may obtain a copy of the License at   *\n *                                                              *\n *   http://www.apache.org/licenses/LICENSE-2.0                 *\n *                                                              *\n * Unless required by applicable law or agreed to in writing,   *\n * software distributed under the License is distributed on an  *\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY       *\n * KIND, either express or implied.  See the License for the    *\n * specific language governing permissions and limitations      *\n * under the License.                                           *\n ****************************************************************/\n\npackage org.apache.james.sieve.cassandra;\n\nimport static com.datastax.driver.core.DataType.bigint;\nimport static com.datastax.driver.core.DataType.cboolean;\nimport static com.datastax.driver.core.DataType.counter;\nimport static com.datastax.driver.core.DataType.text;\nimport static com.datastax.driver.core.DataType.timestamp;\n\nimport org.apache.james.backends.cassandra.components.CassandraModule;\nimport org.apache.james.sieve.cassandra.tables.CassandraSieveActiveTable;\nimport org.apache.james.sieve.cassandra.tables.CassandraSieveClusterQuotaTable;\nimport org.apache.james.sieve.cassandra.tables.CassandraSieveQuotaTable;\nimport org.apache.james.sieve.cassandra.tables.CassandraSieveSpaceTable;\nimport org.apache.james.sieve.cassandra.tables.CassandraSieveTable;\n\n<fim_suffix>public interface CassandraSieveRepositoryModule {\n\n    CassandraModule MODULE = CassandraModule.builder()\n        .table(CassandraSieveTable.TABLE_NAME)\n        .comment(\"Holds SIEVE scripts.\")\n        .options(options -> options)\n        .statement(statement -> statement\n            .addPartitionKey(CassandraSieveTable.USER_NAME, text())\n            .addClusteringColumn(CassandraSieveTable.SCRIPT_NAME, text())\n            .addColumn(CassandraSieveTable.SCRIPT_CONTENT, text())\n            .addColumn(CassandraSieveTable.IS_ACTIVE, cboolean())\n            .addColumn(CassandraSieveTable.SIZE, bigint()))\n        .table(CassandraSieveSpaceTable.TABLE_NAME)\n        .comment(\"Holds per user current space occupied by SIEVE scripts.\")\n        .options(options -> options)\n        .statement(statement -> statement\n            .addPartitionKey(CassandraSieveSpaceTable.USER_NAME, text())\n            .addColumn(CassandraSieveSpaceTable.SPACE_USED, counter()))\n        .table(CassandraSieveQuotaTable.TABLE_NAME)\n        .comment(\"Holds per user size limitations for SIEVE script storage.\")\n        .options(options -> options)\n        .statement(statement -> statement\n            .addPartitionKey(CassandraSieveQuotaTable.USER_NAME, text())\n            .addColumn(CassandraSieveQuotaTable.QUOTA, bigint()))\n        .table(CassandraSieveClusterQuotaTable.TABLE_NAME)\n        .comment(\"Holds default size limitations for SIEVE script storage.\")\n        .options(options -> options)\n        .statement(statement -> statement\n            .addPartitionKey(CassandraSieveClusterQuotaTable.NAME, text())\n            .addColumn(CassandraSieveClusterQuotaTable.VALUE, bigint()))\n        .table(CassandraSieveActiveTable.TABLE_NAME)\n        .comment(\"Denormalisation table. Allows per user direct active SIEVE script retrieval.\")\n        .options(options -> options)\n        .statement(statement -> statement\n            .addPartitionKey(CassandraSieveActiveTable.USER_NAME, text())\n            .addColumn(CassandraSieveActiveTable.SCRIPT_NAME, text())\n            .addColumn(CassandraSieveActiveTable.DATE, timestamp()))\n        .build();\n\n}<fim_middle>// class below is blob\n"}