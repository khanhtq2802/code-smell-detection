{"text": "<fim_prefix>//\n// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n//\n\npackage com.cloud.agent.api.storage;\n\nimport com.cloud.agent.api.to.VolumeTO;\nimport com.cloud.storage.StoragePool;\nimport com.cloud.storage.VMTemplateStorageResourceAssoc;\nimport com.cloud.storage.Volume;\n\n<fim_suffix>public class DestroyCommand extends StorageCommand {\n    // in VMware, things are designed around VM instead of volume, we need it the volume VM context if the volume is attached\n    String vmName;\n    VolumeTO volume;\n\n    protected DestroyCommand() {\n    }\n\n    public DestroyCommand(StoragePool pool, Volume volume, String vmName) {\n        this.volume = new VolumeTO(volume, pool);\n        this.vmName = vmName;\n    }\n\n    public DestroyCommand(StoragePool pool, VMTemplateStorageResourceAssoc templatePoolRef) {\n        volume =\n            new VolumeTO(templatePoolRef.getId(), null, pool.getPoolType(), pool.getUuid(), null, pool.getPath(), templatePoolRef.getInstallPath(),\n                templatePoolRef.getTemplateSize(), null);\n    }\n\n    public VolumeTO getVolume() {\n        return volume;\n    }\n\n    public String getVmName() {\n        return vmName;\n    }\n\n    @Override\n    public boolean executeInSequence() {\n        return true;\n    }\n}<fim_middle>// class below has no smell\n"}