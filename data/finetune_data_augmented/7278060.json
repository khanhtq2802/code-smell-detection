{"text": "<fim_prefix>package com.sap.olingo.jpa.processor.core.query;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.apache.olingo.commons.api.http.HttpStatusCode;\nimport org.apache.olingo.server.api.ODataApplicationException;\nimport org.apache.olingo.server.api.uri.UriResource;\nimport org.apache.olingo.server.api.uri.queryoption.ApplyOption;\nimport org.apache.olingo.server.api.uri.queryoption.CountOption;\nimport org.apache.olingo.server.api.uri.queryoption.CustomQueryOption;\nimport org.apache.olingo.server.api.uri.queryoption.DeltaTokenOption;\nimport org.apache.olingo.server.api.uri.queryoption.ExpandItem;\nimport org.apache.olingo.server.api.uri.queryoption.ExpandOption;\nimport org.apache.olingo.server.api.uri.queryoption.FilterOption;\nimport org.apache.olingo.server.api.uri.queryoption.FormatOption;\nimport org.apache.olingo.server.api.uri.queryoption.IdOption;\nimport org.apache.olingo.server.api.uri.queryoption.OrderByOption;\nimport org.apache.olingo.server.api.uri.queryoption.SearchOption;\nimport org.apache.olingo.server.api.uri.queryoption.SelectOption;\nimport org.apache.olingo.server.api.uri.queryoption.SkipOption;\nimport org.apache.olingo.server.api.uri.queryoption.SkipTokenOption;\nimport org.apache.olingo.server.api.uri.queryoption.TopOption;\n\nimport com.sap.olingo.jpa.metadata.core.edm.mapper.api.JPAEntityType;\nimport com.sap.olingo.jpa.metadata.core.edm.mapper.api.JPAServiceDocument;\nimport com.sap.olingo.jpa.metadata.core.edm.mapper.exception.ODataJPAModelException;\nimport com.sap.olingo.jpa.processor.core.exception.ODataJPAQueryException;\n\n// TODO In case of second level $expand expandItem.getResourcePath() returns an empty UriInfoResource => Bug or\n// Feature?\npublic class JPAExpandItemWrapper implements JPAExpandItem {\n  private final ExpandItem item;\n  private final JPAEntityType jpaEntityType;\n\n  public JPAExpandItemWrapper(final JPAServiceDocument sd, final ExpandItem item) throws ODataApplicationException {\n    super();\n    this.item = item;\n    try {\n      this.jpaEntityType = sd.getEntity(Util.determineTargetEntityType(getUriResourceParts()));\n    } catch (ODataJPAModelException e) {\n      throw new ODataJPAQueryException(ODataJPAQueryException.MessageKeys.QUERY_PREPARATION_ENTITY_UNKNOWN,\n          HttpStatusCode.BAD_REQUEST, e, Util.determineTargetEntityType(getUriResourceParts()).getName());\n    }\n  }\n\n<fim_suffix>  public JPAExpandItemWrapper(final ExpandItem item, final JPAEntityType jpaEntityType) {\n    super();\n    this.item = item;\n    this.jpaEntityType = jpaEntityType;\n  }\n\n  @Override\n  public List<CustomQueryOption> getCustomQueryOptions() {\n    return null;\n  }\n\n  @Override\n  public ExpandOption getExpandOption() {\n    return item.getExpandOption();\n  }\n\n  @Override\n  public FilterOption getFilterOption() {\n    return item.getFilterOption();\n  }\n\n  @Override\n  public FormatOption getFormatOption() {\n    return null;\n  }\n\n  @Override\n  public IdOption getIdOption() {\n    return null;\n  }\n\n  @Override\n  public CountOption getCountOption() {\n    return item.getCountOption();\n  }\n\n  @Override\n  public OrderByOption getOrderByOption() {\n    return item.getOrderByOption();\n  }\n\n  @Override\n  public SearchOption getSearchOption() {\n    return item.getSearchOption();\n  }\n\n  @Override\n  public SelectOption getSelectOption() {\n    return item.getSelectOption();\n  }\n\n  @Override\n  public SkipOption getSkipOption() {\n    return item.getSkipOption();\n  }\n\n  @Override\n  public SkipTokenOption getSkipTokenOption() {\n    return null;\n  }\n\n  @Override\n  public TopOption getTopOption() {\n    return item.getTopOption();\n  }\n\n  @Override\n  public List<UriResource> getUriResourceParts() {\n    return item.getResourcePath() != null ? item.getResourcePath().getUriResourceParts() : new ArrayList<>(1);\n  }\n\n  @Override\n  public String getValueForAlias(final String alias) {\n    return null;\n  }\n\n  /*\n   * (non-Javadoc)\n   * \n   * @see com.sap.olingo.jpa.processor.core.query.JPAExpandItem#getEntityType()\n   */\n  @Override\n  public JPAEntityType getEntityType() {\n    return jpaEntityType;\n  }\n\n  @Override\n  public ApplyOption getApplyOption() {\n    return null;\n  }\n\n  @Override\n  public DeltaTokenOption getDeltaTokenOption() {\n    return null;\n  }\n\n}<fim_middle>// function below has no smell\n"}