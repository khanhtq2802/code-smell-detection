{"text": "<fim_prefix>/*\n * Copyright 2015 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.springframework.integration.samples.barrier2;\n\nimport java.util.Collection;\n\nimport org.springframework.messaging.MessagingException;\n\n/**\n * @author Gary Russell\n * @since 4.2\n *\n */\npublic class Aggregator {\n\n<fim_suffix>\tpublic Object aggregate(Collection<Object> results) {\n\t\tfor (Object o : results) {\n\t\t\tif (o instanceof MessagingException) {\n\t\t\t\treturn new ConsolidatedResultsException(results);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\t@SuppressWarnings(\"serial\")\n\tpublic static class ConsolidatedResultsException extends RuntimeException {\n\n\t\tprivate final Collection<Object> results;\n\n\t\tpublic ConsolidatedResultsException(Collection<Object> results) {\n\t\t\tthis.results = results;\n\t\t}\n\n\t\tpublic Collection<Object> getResults() {\n\t\t\treturn results;\n\t\t}\n\n\t\t@Override\n\t\tpublic String toString() {\n\t\t\treturn \"ConsolidatedResultsException\\n[results=\\n\" + results.toString().replaceAll(\", \", \"\\n\") + \"\\n]\";\n\t\t}\n\n\t}\n\n}<fim_middle>// function below has no smell\n"}