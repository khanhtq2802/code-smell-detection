{"text": "<fim_prefix>/*******************************************************************************\n * Copyright (c) 2016 IBH SYSTEMS GmbH and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     IBH SYSTEMS GmbH - initial API and implementation\n *******************************************************************************/\npackage org.eclipse.packagedrone.utils.io;\n\nimport java.io.BufferedOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\n\n/**\n * A spool out target based on the local file system\n */\n<fim_suffix>public class FileSystemSpoolOutTarget implements SpoolOutTarget\n{\n    private final Path basePath;\n\n    public FileSystemSpoolOutTarget ( final Path basePath )\n    {\n        this.basePath = basePath;\n    }\n\n    @Override\n    public void spoolOut ( final String fileName, final String mimeType, final IOConsumer<OutputStream> streamConsumer ) throws IOException\n    {\n        final Path path = this.basePath.resolve ( fileName );\n        Files.createDirectories ( path.getParent () );\n        try ( OutputStream stream = new BufferedOutputStream ( Files.newOutputStream ( path ) ) )\n        {\n            streamConsumer.accept ( stream );\n        }\n    }\n\n}<fim_middle>// class below has no smell\n"}