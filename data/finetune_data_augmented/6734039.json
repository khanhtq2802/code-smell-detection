{"text": "<fim_prefix>            boolean isRedownload = false;\n            for (String s : new String[]{\"campaigns\", \"adsets\", \"ads\"}) {\n              if (obj.has(s)) {\n                isRedownload = true;\n                obj = obj.getAsJsonObject(s);\n                for (Map.Entry<String, JsonElement> entry : obj.entrySet()) {\n                  adLabels.add(loadJSON(entry.getValue().toString(), context, header));\n                }\n                break;\n              }\n            }\n            if (!isRedownload) {\n              adLabels.add(loadJSON(obj.toString(), context, header));\n            }\n          }\n          return adLabels;\n        } else if (obj.has(\"images\")) {\n          // Fourth, check if it's a map of image objects\n          obj = obj.get(\"images\").getAsJsonObject();\n          for (Map.Entry<String, JsonElement> entry : obj.entrySet()) {\n              adLabels.add(loadJSON(entry.getValue().toString(), context, header));\n          }\n          return adLabels;\n        } else {\n          // Fifth, check if it's an array of objects indexed by id\n          boolean isIdIndexedArray = true;\n          for (Map.Entry entry : obj.entrySet()) {\n            String key = (String) entry.getKey();\n            if (key.equals(\"__fb_trace_id__\")) {\n              continue;\n            }\n            JsonElement value = (JsonElement) entry.getValue();\n            if (\n              value != null &&\n              value.isJsonObject() &&\n              value.getAsJsonObject().has(\"id\") &&\n              value.getAsJsonObject().get(\"id\") != null &&\n              value.getAsJsonObject().get(\"id\").getAsString().equals(key)\n            ) {\n              adLabels.add(loadJSON(value.toString(), context, header));\n            } else {\n              isIdIndexedArray = false;\n              break;\n            }\n          }\n          if (isIdIndexedArray) {\n            return adLabels;\n          }\n          // Sixth, check if it's pure JsonObject\n          adLabels.clear();\n          adLabels.add(loadJSON(json, context, header));\n          return adLabels;\n        }\n      }\n    } catch (Exception e) {\n      exception = e;\n    }\n    throw new MalformedResponseException(\n      \"Invalid response string: \" + json,\n      exception\n    );\n  }\n  @Override\n  public APIContext getContext() {\n    return context;\n  }\n  @Override\n  public void setContext(APIContext context) {\n    this.context = context;\n  }\n  @Override\n  public String toString() {\n    return getGson().toJson(this);\n  }\n  public APIRequestGetAdCreatives getAdCreatives() {\n    return new APIRequestGetAdCreatives(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestGetAds getAds() {\n    return new APIRequestGetAds(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestGetAdSets getAdSets() {\n    return new APIRequestGetAdSets(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestGetCampaigns getCampaigns() {\n    return new APIRequestGetCampaigns(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestDelete delete() {\n    return new APIRequestDelete(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestGet get() {\n    return new APIRequestGet(this.getPrefixedId().toString(), context);\n  }\n  public APIRequestUpdate update() {\n    return new APIRequestUpdate(this.getPrefixedId().toString(), context);\n  }\n  public AdAccount getFieldAccount() {\n    if (mAccount != null) {\n      mAccount.context = getContext();\n    }\n    return mAccount;\n  }\n  public String getFieldCreatedTime() {\n    return mCreatedTime;\n  }\n  public String getFieldId() {\n    return mId;\n  }\n  public String getFieldName() {\n    return mName;\n  }\n  public String getFieldUpdatedTime() {\n    return mUpdatedTime;\n  }\n  public static class APIRequestGetAdCreatives extends APIRequest<AdCreative> {\n    APINodeList<AdCreative> lastResponse = null;\n    @Override\n    public APINodeList<AdCreative> getLastResponse() {\n      return lastResponse;\n    }\n    public static final String[] PARAMS = {\n    };\n    public static final String[] FIELDS = {\n      \"account_id\",\n      \"actor_id\",\n      \"adlabels\",\n      \"applink_treatment\",\n      \"asset_feed_spec\",\n      \"authorization_category\",\n      \"auto_update\",\n      \"body\",\n      \"branded_content_sponsor_page_id\",\n      \"bundle_folder_id\",\n      \"call_to_action_type\",\n      \"categorization_criteria\",\n      \"category_media_source\",\n      \"destination_set_id\",\n      \"dynamic_ad_voice\",\n      \"effective_authorization_category\",\n      \"effective_instagram_story_id\",\n      \"effective_object_story_id\",\n      \"enable_direct_install\",\n      \"enable_launch_instant_app\",\n      \"id\",\n      \"image_crops\",\n      \"image_hash\",\n      \"image_url\",\n      \"instagram_actor_id\",\n      \"instagram_permalink_url\",\n      \"instagram_story_id\",\n      \"link_deep_link_url\",\n      \"link_og_id\",\n      \"link_url\",\n      \"messenger_sponsored_message\",\n      \"name\",\n      \"object_id\",\n      \"object_store_url\",\n      \"object_story_id\",\n      \"object_story_spec\",\n      \"object_type\",\n      \"object_url\",\n      \"place_page_set_id\",\n      \"platform_customizations\",\n      \"playable_asset_id\",\n      \"portrait_customizations\",\n      \"product_set_id\",\n      \"recommender_settings\",\n      \"status\",\n      \"template_url\",\n      \"template_url_spec\",\n      \"thumbnail_url\",\n      \"title\",\n      \"url_tags\",\n      \"use_page_actor_override\",\n      \"video_id\",\n    };\n    @Override\n    public APINodeList<AdCreative> parseResponse(String response, String header) throws APIException {\n      return AdCreative.parseResponse(response, getContext(), this, header);\n    }\n    @Override\n    public APINodeList<AdCreative> execute() throws APIException {\n      return execute(new HashMap<String, Object>());\n    }\n    @Override\n    public APINodeList<AdCreative> execute(Map<String, Object> extraParams) throws APIException {\n      ResponseWrapper rw = executeInternal(extraParams);\n      lastResponse = parseResponse(rw.getBody(),rw.getHeader());\n      return lastResponse;\n    }\n    public ListenableFuture<APINodeList<AdCreative>> executeAsync() throws APIException {\n      return executeAsync(new HashMap<String, Object>());\n    };\n    public ListenableFuture<APINodeList<AdCreative>> executeAsync(Map<String, Object> extraParams) throws APIException {\n      return Futures.transform(\n        executeAsyncInternal(extraParams),\n        new Function<ResponseWrapper, APINodeList<AdCreative>>() {\n           public APINodeList<AdCreative> apply(ResponseWrapper result) {\n             try {\n               return APIRequestGetAdCreatives.this.parseResponse(result.getBody(), result.getHeader());\n             } catch (Exception e) {\n               throw new RuntimeException(e);\n             }\n           }\n         }\n      );\n    };\n    public APIRequestGetAdCreatives(String nodeId, APIContext context) {\n      super(context, nodeId, \"/adcreatives\", \"GET\", Arrays.asList(PARAMS));\n    }\n    @Override\n    public APIRequestGetAdCreatives setParam(String param, Object value) {\n      setParamInternal(param, value);\n      return this;\n    }\n    @Override\n    public APIRequestGetAdCreatives setParams(Map<String, Object> params) {\n      setParamsInternal(params);\n      return this;\n    }\n    public APIRequestGetAdCreatives requestAllFields () {\n      return this.requestAllFields(true);\n    }\n    public APIRequestGetAdCreatives requestAllFields (boolean value) {\n      for (String field : FIELDS) {\n        this.requestField(field, value);\n      }\n      return this;\n    }\n    @Override\n    public APIRequestGetAdCreatives requestFields (List<String> fields) {\n      return this.requestFields(fields, true);\n    }\n    @Override\n    public APIRequestGetAdCreatives requestFields (List<String> fields, boolean value) {\n      for (String field : fields) {\n        this.requestField(field, value);\n      }\n      return this;\n    }\n    @Override\n    public APIRequestGetAdCreatives requestField (String field) {\n      this.requestField(field, true);\n      return this;\n    }\n<fim_suffix>    @Override\n    public APIRequestGetAdCreatives requestField (String field, boolean value) {\n      this.requestFieldInternal(field, value);\n      return this;\n    }<fim_middle>// function below has no smell\n"}