{"text": "<fim_prefix>/**\n * Copyright (c) Microsoft Corporation\n * \n * All rights reserved. \n * \n * MIT License\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files \n * (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, \n * publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, \n * subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF \n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR \n * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH \n * THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\npackage com.microsoft.azuretools.hdinsight;\n\nimport org.eclipse.core.runtime.IStatus;\nimport org.eclipse.core.runtime.Status;\nimport org.eclipse.jface.resource.ImageDescriptor;\nimport org.eclipse.ui.plugin.AbstractUIPlugin;\nimport org.osgi.framework.BundleContext;\n\nimport com.microsoft.tooling.msservices.components.DefaultLoader;\nimport com.microsoft.azure.hdinsight.common.HDInsightLoader;\nimport com.microsoft.azuretools.azurecommons.helpers.StringHelper;\nimport com.microsoft.azuretools.telemetry.AppInsightsClient;\nimport com.microsoft.azuretools.hdinsight.util.HDInsightJobViewUtils;\nimport com.microsoft.azuretools.core.utils.Messages;\n\n/**\n * The activator class controls the plug-in life cycle\n */\n<fim_suffix>public class Activator extends AbstractUIPlugin {\n\n\t// The plug-in ID\n\tpublic static final String PLUGIN_ID = \"com.microsoft.azuretools.hdinsight\"; //$NON-NLS-1$\n\n\t// The shared instance\n\tprivate static Activator plugin;\n\t\n\t/**\n\t * The constructor\n\t */\n\tpublic Activator() {\n\t}\n\n\t/*\n\t * (non-Javadoc)\n\t * @see org.eclipse.ui.plugin.AbstractUIPlugin#start(org.osgi.framework.BundleContext)\n\t */\n\tpublic void start(BundleContext context) throws Exception {\n\t\tsuper.start(context);\n\t\tplugin = this;\n\n        com.microsoft.azuretools.azureexplorer.helpers.HDInsightHelperImpl.initHDInsightLoader();\n\n\t\tString enabledProperty = DefaultLoader.getIdeHelper().getProperty(Messages.HDInsightFeatureEnabled);\n\t\tif(StringHelper.isNullOrWhiteSpace(enabledProperty)) {\n\t\t\tAppInsightsClient.create(Messages.HDInsightFeatureEnabled, context.getBundle().getVersion().toString());\n\t\t\tDefaultLoader.getIdeHelper().setProperty(Messages.HDInsightFeatureEnabled, \"true\");\n\t\t}\n\t\tHDInsightJobViewUtils.checkInitlize();\n\t}\n\n\t/*\n\t * (non-Javadoc)\n\t * @see org.eclipse.ui.plugin.AbstractUIPlugin#stop(org.osgi.framework.BundleContext)\n\t */\n\tpublic void stop(BundleContext context) throws Exception {\n\t\tplugin = null;\n\t\tsuper.stop(context);\n\t\tHDInsightJobViewUtils.closeJobViewHttpServer();\n\t}\n\n\t/**\n\t * Returns the shared instance\n\t *\n\t * @return the shared instance\n\t */\n\tpublic static Activator getDefault() {\n\t\treturn plugin;\n\t}\n\n\tpublic static ImageDescriptor getImageDescriptor(String path) {\n\t\treturn imageDescriptorFromPlugin(PLUGIN_ID, path);\n\t}\n\t\n\tpublic void log(String message, Throwable excp) {\n        getLog().log(new Status(IStatus.ERROR, PLUGIN_ID, message, excp));\n    }\n}<fim_middle>// class below has no smell\n"}