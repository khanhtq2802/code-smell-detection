{"text": "<fim_prefix>/*\n * Tencent is pleased to support the open source community by making QMUI_Android available.\n *\n * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\n *\n * Licensed under the MIT License (the \"License\"); you may not use this file except in\n * compliance with the License. You may obtain a copy of the License at\n *\n * http://opensource.org/licenses/MIT\n *\n * Unless required by applicable law or agreed to in writing, software distributed under the License is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.qmuiteam.qmui.widget;\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Color;\nimport android.graphics.drawable.Drawable;\nimport androidx.core.content.ContextCompat;\nimport android.util.AttributeSet;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.FrameLayout;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\nimport com.qmuiteam.qmui.R;\nimport com.qmuiteam.qmui.alpha.QMUIAlphaImageButton;\nimport com.qmuiteam.qmui.util.QMUIDrawableHelper;\nimport com.qmuiteam.qmui.util.QMUIResHelper;\nimport com.qmuiteam.qmui.util.QMUIViewHelper;\n/**\n * \u8fd9\u662f\u4e00\u4e2a\u5bf9 {@link QMUITopBar} \u7684\u4ee3\u7406\u7c7b\uff0c\u9700\u8981\u5b83\u7684\u539f\u56e0\u662f\uff1a\n * \u6211\u4eec\u7528 fitSystemWindows \u5b9e\u73b0\u6c89\u6d78\u5f0f\u72b6\u6001\u680f\u540e\uff0c\u9700\u8981\u5c06 {@link QMUITopBar} \u7684\u80cc\u666f\u884d\u751f\u5230\u72b6\u6001\u680f\u540e\u9762\uff0c\u8fd9\u4e2a\u65f6\u5019 fitSystemWindows \u662f\u901a\u8fc7\n * \u66f4\u6539 padding \u5b9e\u73b0\u7684\uff0c\u800c {@link QMUITopBar} \u662f\u5728\u9ad8\u5ea6\u56fa\u5b9a\u7684\u524d\u63d0\u4e0b\u505a\u5404\u79cd\u884c\u4e3a\u7684\uff0c\u4f8b\u5982\u6309\u94ae\u7684\u5782\u76f4\u5c45\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728\u5916\u9762\u5305\u88f9\u4e00\u5c42\u5e76\u6d88\u8017 padding\n * <p>\n * \u8fd9\u4e2a\u7c7b\u4e00\u822c\u662f\u914d\u5408 {@link QMUIWindowInsetLayout} \u4f7f\u7528\uff0c\u5e76\u9700\u8981\u8bbe\u7f6e fitSystemWindows \u4e3a true\n * </p>\n *\n * @author cginechen\n * @date 2016-11-26\n */\npublic class QMUITopBarLayout extends FrameLayout {\n    private QMUITopBar mTopBar;\n    private Drawable mTopBarBgWithSeparatorDrawableCache;\n    private int mTopBarSeparatorColor;\n    private int mTopBarBgColor;\n    private int mTopBarSeparatorHeight;\n    public QMUITopBarLayout(Context context) {\n        this(context, null);\n    }\n    public QMUITopBarLayout(Context context, AttributeSet attrs) {\n        this(context, attrs, R.attr.QMUITopBarStyle);\n    }\n    public QMUITopBarLayout(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        TypedArray array = getContext().obtainStyledAttributes(attrs, R.styleable.QMUITopBar, R.attr.QMUITopBarStyle, 0);\n        mTopBarSeparatorColor = array.getColor(R.styleable.QMUITopBar_qmui_topbar_separator_color,\n                ContextCompat.getColor(context, R.color.qmui_config_color_separator));\n        mTopBarSeparatorHeight = array.getDimensionPixelSize(R.styleable.QMUITopBar_qmui_topbar_separator_height, 1);\n        mTopBarBgColor = array.getColor(R.styleable.QMUITopBar_qmui_topbar_bg_color, Color.WHITE);\n        boolean hasSeparator = array.getBoolean(R.styleable.QMUITopBar_qmui_topbar_need_separator, true);\n        // \u6784\u9020\u4e00\u4e2a\u900f\u660e\u7684\u80cc\u666f\u4e14\u65e0\u5206\u9694\u7ebf\u7684TopBar\uff0c\u80cc\u666f\u4e0e\u5206\u9694\u7ebf\u6709QMUITopBarLayout\u63a7\u5236\n        mTopBar = new QMUITopBar(context, true);\n        mTopBar.getCommonFieldFormTypedArray(context, array);\n        FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(\n                ViewGroup.LayoutParams.MATCH_PARENT,\n                QMUIResHelper.getAttrDimen(context, R.attr.qmui_topbar_height));\n        addView(mTopBar, lp);\n        array.recycle();\n        setBackgroundDividerEnabled(hasSeparator);\n    }\n    public void setCenterView(View view) {\n        mTopBar.setCenterView(view);\n    }\n    public TextView setTitle(int resId) {\n        return mTopBar.setTitle(resId);\n    }\n    public TextView setTitle(String title) {\n        return mTopBar.setTitle(title);\n    }\n    public TextView setEmojiTitle(String title) {\n        return mTopBar.setEmojiTitle(title);\n    }\n    public void showTitlteView(boolean toShow) {\n        mTopBar.showTitleView(toShow);\n    }\n    public void setSubTitle(int resId) {\n        mTopBar.setSubTitle(resId);\n    }\n    public void setSubTitle(String subTitle) {\n        mTopBar.setSubTitle(subTitle);\n    }\n    public void setTitleGravity(int gravity) {\n        mTopBar.setTitleGravity(gravity);\n    }\n    public void addLeftView(View view, int viewId) {\n        mTopBar.addLeftView(view, viewId);\n    }\n    public void addLeftView(View view, int viewId, RelativeLayout.LayoutParams layoutParams) {\n        mTopBar.addLeftView(view, viewId, layoutParams);\n    }\n    public void addRightView(View view, int viewId) {\n        mTopBar.addRightView(view, viewId);\n    }\n    public void addRightView(View view, int viewId, RelativeLayout.LayoutParams layoutParams) {\n        mTopBar.addRightView(view, viewId, layoutParams);\n    }\n<fim_suffix>    public QMUIAlphaImageButton addRightImageButton(int drawableResId, int viewId) {\n        return mTopBar.addRightImageButton(drawableResId, viewId);\n    }\n    public QMUIAlphaImageButton addLeftImageButton(int drawableResId, int viewId) {\n        return mTopBar.addLeftImageButton(drawableResId, viewId);\n    }\n    public Button addLeftTextButton(int stringResId, int viewId) {\n        return mTopBar.addLeftTextButton(stringResId, viewId);\n    }\n    public Button addLeftTextButton(String buttonText, int viewId) {\n        return mTopBar.addLeftTextButton(buttonText, viewId);\n    }\n    public Button addRightTextButton(int stringResId, int viewId) {\n        return mTopBar.addRightTextButton(stringResId, viewId);\n    }\n    public Button addRightTextButton(String buttonText, int viewId) {\n        return mTopBar.addRightTextButton(buttonText, viewId);\n    }\n    public QMUIAlphaImageButton addLeftBackImageButton() {\n        return mTopBar.addLeftBackImageButton();\n    }\n    public void removeAllLeftViews() {\n        mTopBar.removeAllLeftViews();\n    }\n    public void removeAllRightViews() {\n        mTopBar.removeAllRightViews();\n    }\n    public void removeCenterViewAndTitleView() {\n        mTopBar.removeCenterViewAndTitleView();\n    }\n    /**\n     * \u8bbe\u7f6e TopBar \u80cc\u666f\u7684\u900f\u660e\u5ea6\n     *\n     * @param alpha \u53d6\u503c\u8303\u56f4\uff1a[0, 255]\uff0c255\u8868\u793a\u4e0d\u900f\u660e\n     */\n    public void setBackgroundAlpha(int alpha) {\n        this.getBackground().setAlpha(alpha);\n    }\n    /**\n     * \u6839\u636e\u5f53\u524d offset\u3001\u900f\u660e\u5ea6\u53d8\u5316\u7684\u521d\u59cb offset \u548c\u76ee\u6807 offset\uff0c\u8ba1\u7b97\u5e76\u8bbe\u7f6e Topbar \u7684\u900f\u660e\u5ea6\n     *\n     * @param currentOffset     \u5f53\u524d offset\n     * @param alphaBeginOffset  \u900f\u660e\u5ea6\u5f00\u59cb\u53d8\u5316\u7684offset\uff0c\u5373\u5f53 currentOffset == alphaBeginOffset \u65f6\uff0c\u900f\u660e\u5ea6\u4e3a0\n     * @param alphaTargetOffset \u900f\u660e\u5ea6\u53d8\u5316\u7684\u76ee\u6807offset\uff0c\u5373\u5f53 currentOffset == alphaTargetOffset \u65f6\uff0c\u900f\u660e\u5ea6\u4e3a1\n     */\n    public int computeAndSetBackgroundAlpha(int currentOffset, int alphaBeginOffset, int alphaTargetOffset) {\n        double alpha = (float) (currentOffset - alphaBeginOffset) / (alphaTargetOffset - alphaBeginOffset);\n        alpha = Math.max(0, Math.min(alpha, 1)); // from 0 to 1\n        int alphaInt = (int) (alpha * 255);\n        this.setBackgroundAlpha(alphaInt);\n        return alphaInt;\n    }\n    /**\n     * \u8bbe\u7f6e\u662f\u5426\u8981 Topbar \u5e95\u90e8\u7684\u5206\u5272\u7ebf\n     *<fim_middle>// function below has no smell\n"}