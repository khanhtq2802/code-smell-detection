{"text": "<fim_prefix>/**\n * Copyright (c) 2014,2019 Contributors to the Eclipse Foundation\n *\n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0\n *\n * SPDX-License-Identifier: EPL-2.0\n */\npackage org.eclipse.smarthome.model.script.actions;\n\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.SocketAddress;\nimport java.net.SocketTimeoutException;\n\n/**\n * This Action checks the vitality of the given host.\n *\n * @author Thomas.Eichstaedt-Engelen\n * @author Kai Kreuzer\n */\n<fim_suffix>public class Ping {\n\n    /**\n     * Checks the vitality of <code>host</code>. If <code>port</code> '0'\n     * is specified (which is the default when configuring just the host), a\n     * regular ping is issued. If other ports are specified we try open a new\n     * Socket with the given <code>timeout</code>.\n     * \n     * @param host\n     * @param port\n     * @param timeout\n     * \n     * @return <code>true</code> when <code>host</code> is reachable on <code>port</code> within the given\n     *         <code>timeout</code> and <code>false</code> in all other\n     *         cases.\n     * \n     * @throws IOException\n     * @throws SocketTimeoutException\n     */\n    public static boolean checkVitality(String host, int port, int timeout) throws IOException, SocketTimeoutException {\n        boolean success = false;\n\n        if (host != null && timeout > 0) {\n            if (port == 0) {\n                success = InetAddress.getByName(host).isReachable(timeout);\n            } else {\n                SocketAddress socketAddress = new InetSocketAddress(host, port);\n\n                Socket socket = new Socket();\n                socket.connect(socketAddress, timeout);\n                success = true;\n                socket.close();\n            }\n        }\n\n        return success;\n    }\n\n}<fim_middle>// class below has no smell\n"}