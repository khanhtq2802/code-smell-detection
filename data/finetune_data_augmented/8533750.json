{"text": "<fim_prefix>// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\npackage org.apache.cloudstack.api.command.user.config;\n\nimport java.util.Map;\n\nimport org.apache.cloudstack.api.APICommand;\nimport org.apache.cloudstack.api.BaseCmd;\nimport org.apache.cloudstack.api.response.CapabilitiesResponse;\nimport org.apache.log4j.Logger;\n\nimport com.cloud.user.Account;\n\n<fim_suffix>@APICommand(name = \"listCapabilities\", description = \"Lists capabilities\", responseObject = CapabilitiesResponse.class,\n        requestHasSensitiveInfo = false, responseHasSensitiveInfo = false)\npublic class ListCapabilitiesCmd extends BaseCmd {\n    public static final Logger s_logger = Logger.getLogger(ListCapabilitiesCmd.class.getName());\n\n    private static final String s_name = \"listcapabilitiesresponse\";\n\n    @Override\n    public String getCommandName() {\n        return s_name;\n    }\n\n    @Override\n    public long getEntityOwnerId() {\n        return Account.ACCOUNT_ID_SYSTEM;\n    }\n\n    @Override\n    public void execute() {\n        Map<String, Object> capabilities = _mgr.listCapabilities(this);\n        CapabilitiesResponse response = new CapabilitiesResponse();\n        response.setSecurityGroupsEnabled((Boolean)capabilities.get(\"securityGroupsEnabled\"));\n        response.setDynamicRolesEnabled(roleService.isEnabled());\n        response.setCloudStackVersion((String)capabilities.get(\"cloudStackVersion\"));\n        response.setUserPublicTemplateEnabled((Boolean)capabilities.get(\"userPublicTemplateEnabled\"));\n        response.setSupportELB((String)capabilities.get(\"supportELB\"));\n        response.setProjectInviteRequired((Boolean)capabilities.get(\"projectInviteRequired\"));\n        response.setAllowUsersCreateProjects((Boolean)capabilities.get(\"allowusercreateprojects\"));\n        response.setDiskOffMinSize((Long)capabilities.get(\"customDiskOffMinSize\"));\n        response.setDiskOffMaxSize((Long)capabilities.get(\"customDiskOffMaxSize\"));\n        response.setRegionSecondaryEnabled((Boolean)capabilities.get(\"regionSecondaryEnabled\"));\n        response.setKVMSnapshotEnabled((Boolean)capabilities.get(\"KVMSnapshotEnabled\"));\n        response.setAllowUserViewDestroyedVM((Boolean)capabilities.get(\"allowUserViewDestroyedVM\"));\n        response.setAllowUserExpungeRecoverVM((Boolean)capabilities.get(\"allowUserExpungeRecoverVM\"));\n        if (capabilities.containsKey(\"apiLimitInterval\")) {\n            response.setApiLimitInterval((Integer)capabilities.get(\"apiLimitInterval\"));\n        }\n        if (capabilities.containsKey(\"apiLimitMax\")) {\n            response.setApiLimitMax((Integer)capabilities.get(\"apiLimitMax\"));\n        }\n        response.setObjectName(\"capability\");\n        response.setResponseName(getCommandName());\n        this.setResponseObject(response);\n    }\n}<fim_middle>// class below has no smell\n"}