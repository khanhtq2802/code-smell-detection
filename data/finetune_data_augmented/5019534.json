{"text": "<fim_prefix>/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.karaf.jndi.command;\n\nimport org.apache.karaf.jndi.JndiService;\nimport org.apache.karaf.jndi.command.completers.ContextsCompleter;\nimport org.apache.karaf.shell.api.action.Action;\nimport org.apache.karaf.shell.api.action.Argument;\nimport org.apache.karaf.shell.api.action.Command;\nimport org.apache.karaf.shell.api.action.Completion;\nimport org.apache.karaf.shell.api.action.lifecycle.Reference;\nimport org.apache.karaf.shell.api.action.lifecycle.Service;\nimport org.apache.karaf.shell.support.table.ShellTable;\n\nimport java.util.Map;\n\n<fim_suffix>@Command(scope = \"jndi\", name = \"names\", description = \"List the JNDI names.\")\n@Service\npublic class NamesCommand implements Action {\n\n    @Argument(index = 0, name = \"context\", description = \"The JNDI context to display the names\", required = false, multiValued = false)\n    @Completion(ContextsCompleter.class)\n    String context;\n\n    @Reference\n    JndiService jndiService;\n\n    @Override\n    public Object execute() throws Exception {\n        ShellTable table = new ShellTable();\n\n        table.column(\"JNDI Name\");\n        table.column(\"Class Name\");\n\n        Map<String, String> names;\n        if (context == null) {\n            names = jndiService.names();\n        } else {\n            names = jndiService.names(context);\n        }\n\n        for (String name : names.keySet()) {\n            table.addRow().addContent(name, names.get(name));\n        }\n\n        table.print(System.out);\n\n        return null;\n    }\n\n}<fim_middle>// class below has no smell\n"}